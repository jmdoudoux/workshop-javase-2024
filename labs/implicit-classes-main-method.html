<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Lab : les Implicitly Declared Classes and Instance Main Methods</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./rouge-github.css">
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="implicit-classes-main-method" class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="lab-implicit-classes-main-method.html">Lab : les Implicitly Declared Classes and Instance Main Methods</a></span></p><ul class="sectlevel3">
<li><a href="lab-implicit-classes-main-method.html#implicit-classes-main-method"><span class="toc-current">1. Lab : les Implicitly Declared Classes and Instance Main Methods</span></a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect3">
<h4 id="implicit-classes-main-method"><a class="anchor" href="#implicit-classes-main-method"></a>1. Lab : les Implicitly Declared Classes and Instance Main Methods</h4>
<div class="paragraph">
<p>Historiquement, un simple "Hello World" est plutôt compliqué en Java pour les débutants car il met en œuvre différents concepts de visibilité, de classe, de <code>static</code>, de tableau de chaîne de caractères.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>{kb}<br>
Consulter la classe <code>HelloWorld.java</code> dans le sous-répertoire <code>src\main\java</code> du workspace</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorld</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello World"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Compiler la classe <code>HelloWorld.java</code> dans le sous-répertoire <code>src\main\java</code> du workspace avec la commande :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">javac HelloWorld.java</code></pre>
</div>
</div>
<div class="literalblock">
<div class="title">Résultat d&#8217;exécution</div>
<div class="content">
<pre>{workdir}\src\main\java>javac HelloWorld.java

{workdir}\src\main\java></pre>
</div>
</div>
<div class="paragraph">
<p>Exécuter la classe <code>HelloWorld</code> dans le sous-répertoire <code>src\main\java</code> du workspace avec la commande :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">java HelloWorld</code></pre>
</div>
</div>
<div class="literalblock">
<div class="title">Résultat d&#8217;exécution</div>
<div class="content">
<pre>{workdir}\src\main\java>java HelloWorld
Hello World</pre>
</div>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>JDK</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Première preview en Java 21 <a href="https://openjdk.org/jeps/445">JEP 445</a>. Second Preview en Java 22</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>JEP</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openjdk.org/jeps/463">463: Implicitly Declared Classes and Instance Main Methods (Second Preview)</a></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
{preview}
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Le but est de faire évoluer le langage pour simplifier les programmes simples et faciliter l&#8217;apprentissage du langage Java par les débutants.</p>
</div>
<div class="paragraph">
<p>Deux évolutions sont proposées dans un fichier source unique.</p>
</div>
<div class="paragraph">
<p>La méthode <code>main()</code> peut être une méthode d&#8217;instance avec ou sans tableau de chaînes de caractères en paramètre. Ainsi quatre formes sont possibles pour la méthode <code>main()</code> :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>statique ou d&#8217;instance</p>
</li>
<li>
<p>avec ou sans paramètre selon les besoins</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La visibilité de la méthode <code>main()</code> peut être <code>public</code>, <code>protected</code> ou par défaut (package-private).</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>{kb}<br>
Modifier le fichier <code>HelloWorld.java</code> pour que la méthode <code>main()</code> soit une méthode d&#8217;instance avec la visibilité par défaut.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorld</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello World"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Compiler et exécuter la classe <code>HelloWorld.java</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="plain">{workdir}\src\main\java>javac HelloWorld.java

{workdir}\src\main\java>java HelloWorld
Error: Main method not found in class HelloWorld, please define the main method as:
   public static void main(String[] args)
or a JavaFX application class must extend javafx.application.Application</code></pre>
</div>
</div>
<div class="paragraph">
<p>La classe ne s&#8217;exécute pas car la fonctionnalité est en <code>preview</code>. Ajouter les options requises pour compiler et exécuter du code qui utilise des fonctionnalités en <code>preview</code>.</p>
</div>
<div class="paragraph">
<p>Compiler la classe <code>HelloWorld.java</code> dans le sous-répertoire <code>src\main\java</code> du workspace avec la commande :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">javac <span class="nt">--enable-preview</span> <span class="nt">--source</span> 22 HelloWorld.java</code></pre>
</div>
</div>
<div class="literalblock">
<div class="title">Résultat d&#8217;exécution</div>
<div class="content">
<pre>{workdir}\src\main\java>javac --enable-preview --source 22 HelloWorld.java</pre>
</div>
</div>
<div class="paragraph">
<p>Exécuter la classe <code>HelloWorld</code> dans le sous-répertoire <code>src\main\java</code> du workspace avec la commande :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">java <span class="nt">--enable-preview</span> HelloWorld</code></pre>
</div>
</div>
<div class="literalblock">
<div class="title">Résultat d&#8217;exécution</div>
<div class="content">
<pre>{workdir}\src\main\java>java --enable-preview HelloWorld
Hello World</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Le tableau de chaînes de caractères de la méthode <code>main()</code> contenant les arguments passés à l&#8217;application sont optionnels.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>{kb}<br>
Modifier <code>HelloWorld.java</code> pour que la méthode <code>main()</code> soit sans paramètre.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorld</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello World"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Compiler et exécuter la classe <code>HelloWorld.java</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="plain">{workdir}\src\main\java>javac --enable-preview --source 22 HelloWorld.java

{workdir}\src\main\java>java --enable-preview HelloWorld
Hello World</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>La sélection, par la JVM, de la méthode <code>main()</code> à utiliser se fait en 2 étapes :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Invocation d&#8217;une méthode candidate avec un paramètre <code>String[]</code>, si elle existe</p>
</li>
<li>
<p>Sinon invocation d&#8217;une méthode candidate sans paramètre si elle existe</p>
</li>
<li>
<p>Sinon une erreur est émise</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Il n&#8217;y pas d&#8217;ambiguïté car une méthode statique et d&#8217;instance ne peuvent pas avoir la même signature.</p>
</div>
<div class="paragraph">
<p>Il n&#8217;est plus obligatoire de définir explicitement une classe : dans ce cas, une classe implicite sera définie par le compilateur (implicit declared class) dans le package par défaut.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>{kb}<br>
Modifier <code>HelloWorld.java</code> pour retirer la classe et ne laisser que la méthode <code>main()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java">  <span class="kt">void</span> <span class="nf">main</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello World"</span><span class="o">);</span>
  <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Compiler et exécuter la classe <code>HelloWorld.java</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="plain">{workdir}\src\main\java>javac --enable-preview --source 22 HelloWorld.java
Note: HelloWorld.java uses preview features of Java SE 22.
Note: Recompile with -Xlint:preview for details.

{workdir}\src\main\java>java --enable-preview HelloWorld
Hello World</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
le nom du fichier est libre tant que qu&#8217;il est un identifiant Java valide.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Un constructeur par défaut sera créé par le compilateur mais il n&#8217;est pas possible de définir explicitement un constructeur puisque le nom de la classe n&#8217;est pas connu.</p>
</div>
<div class="paragraph">
<p>Comme le nom de la classe n&#8217;est pas connu, il n&#8217;est pas possible d&#8217;utiliser de référence de méthodes sur ses méthodes statiques.</p>
</div>
<div class="paragraph">
<p>Depuis Java 11, il est aussi possible d&#8217;utiliser directement la JVM pour exécuter un unique fichier source Java qui sera compilé à la volée au lancement de la JVM.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>{kb}<br></p>
</div>
<div class="paragraph">
<p>Supprimer le fichier <code>HelloWorld.class</code> avec la commande :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">del HelloWorld.class</code></pre>
</div>
</div>
<div class="literalblock">
<div class="title">Résultat d&#8217;exécution</div>
<div class="content">
<pre>{workdir}\src\main\java>del HelloWorld.class</pre>
</div>
</div>
<div class="paragraph">
<p>Exécuter la classe <code>HelloWorld.java</code> directement par la JVM avec les options requises pour compiler et exécuter du code qui utilise des fonctionnalités en <code>preview</code> avec la commande :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">java <span class="nt">--enable-preview</span> <span class="nt">--source</span> 22 HelloWorld.java</code></pre>
</div>
</div>
<div class="literalblock">
<div class="title">Résultat d&#8217;exécution</div>
<div class="content">
<pre>{workdir}\src\main\java>java --enable-preview --source 22 HelloWorld.java
Hello World</pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Il n&#8217;est pas possible d&#8217;avoir de Javadoc sur une classe implicite.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>&nbsp;</p>
</div>
</div>
<div class="paragraph nav-footer">
<p></p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-06-23 17:53:25 +0200
</div>
</div>
</body>
</html>